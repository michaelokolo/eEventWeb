@page "/organizer/create-event"
@model Web.Pages.Organizer.CreateEventModel
@{
	ViewData["Title"] = "Create Event";
}

<div class="createEvent">
    <header class="createEvent-header">
        <h1 class="heading">Create Event</h1>
        <p class="subheading">Fill out the details below to publish your new event.</p>
    </header>


    <form method="post" class="createEvent-form">

        <!-- Title -->
        <div class="form-group">
            <label asp-for="Event.Title"></label>
            <input asp-for="Event.Title" class="form-control" placeholder="Enter event title" />
            <span asp-validation-for="Event.Title" class="text-danger"></span>
        </div>
        <!-- Description -->
        <div class="form-group">
            <label asp-for="Event.Description"></label>
            <textarea asp-for="Event.Description" class="form-control" placeholder="Write a short description"></textarea>
            <span asp-validation-for="Event.Description" class="text-danger"></span>
        </div>

        <!-- Role -->
        <div class="form-group">
            <label asp-for="Event.Role"></label>
            <input asp-for="Event.Role" class="form-control" placeholder="Organizer, Coordinator, etc." />
            <span asp-validation-for="Event.Role" class="text-danger"></span>
        </div>

        <!-- Grid: Date, Budget, Location -->

        <div class="form-grid">
            <div class="form-group">
                <label asp-for="Event.Date"></label>
                <input asp-for="Event.Date" type="date" class="form-control" />
                <span asp-validation-for="Event.Date" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Event.Budget"></label>
                <input asp-for="Event.Budget" type="number" class="form-control" placeholder="e.g. 5000" />
                <span asp-validation-for="Event.Budget" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Event.Location"></label>
                <input asp-for="Event.Location" class="form-control" placeholder="City, Venue, or Online" />
                <span asp-validation-for="Event.Location" class="text-danger"></span>
            </div>
        </div>
        
        <!-- Image -->
        <div class="form-group">
            <label asp-for="Event.PictureUri"></label>
            <input asp-for="Event.PictureUri" class="form-control" placeholder="https://example.com/event.jpg" />
            <span asp-validation-for="Event.PictureUri" class="text-danger"></span>
        </div>

        <!-- Requirements -->
        <div class="form-group">
            <label>Requirements</label>
            <div id="requirements-list">
                @for (int i = 0; i < Model.Event.Requirements.Count; i++)
                {
                    <div class="input-group">
                        <input asp-for="Event.Requirements[i]" class="form-control" placeholder="Add a requirement" />
                        <button type="button" class="btn btn-danger" onclick="removeRequirement(this)">Remove</button>
                    </div>
                }
            </div>
            <button type="button" class="btn btn-secondary" onclick="addRequirement()"> +Add Requirement </button>
        </div>
        <!-- Submit -->
        <div class="form-actions">
            <button type="submit" class="btn btn-success">Create</button>
        </div>
        
    </form>
</div>


@section Scripts {
    <script>
        function addRequirement() {
            var list = document.getElementById('requirements-list');
            var index = list.children.length;
            var div = document.createElement('div');
            div.className = 'input-group';
            div.innerHTML =
                `<input name = "Event.Requirements[${index}]" class= "form-control" placeholder = "Add a requirement" />
                 <button type = "button" class= "btn btn-danger" onclick = "removeRequirement(this)" > Remove </button>`;
            list.appendChild(div);
        }
        function removeRequirement(btn)
        {
            btn.parentElement.remove();
        }
    </script>
}